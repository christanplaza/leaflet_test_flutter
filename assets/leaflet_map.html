<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <style>
      body, html, #map { height: 100%; margin: 0; padding: 0; }
    </style>
  </head>
  <body>
    <div id="map"></div>
    <script>
      function addMarker(lat, lng, iconUrl) {
        console.log(`Adding marker at lat: ${lat}, lng: ${lng} with icon: ${iconUrl}`);
        try {
          var icon = L.icon({
            iconUrl: iconUrl,
            iconSize: [50, 50],
            iconAnchor: [25, 50],
            popupAnchor: [0, -50]
          });

          L.marker([lat, lng], { icon: icon }).addTo(map);
          console.log('Marker added successfully');
        } catch (e) {
          console.error('Error adding marker:', e);
        }
      }
      // Initialize the map
      var map = L.map('map').setView([0,0], 13);

      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
      }).addTo(map);

      // Define the custom icons
      var regularIcon = L.icon({
        iconUrl: '$regularIconBase64', // Path to regular marker
        iconSize: [50, 50],
        iconAnchor: [0, 50],
        popupAnchor: [0, 0]
      });

      var grayIcon = L.icon({
        iconUrl: '$grayIconBase64', // Path to gray marker
        iconSize: [50, 50],
        iconAnchor: [25, 50],
        popupAnchor: [0, -50]
      });
    </script>
  </body>
</html>